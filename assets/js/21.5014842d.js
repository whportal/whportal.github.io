(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{503:function(s,n,a){"use strict";a.r(n);var t=a(4),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",[s._v("Maven 多模块情况下，配置文件的加载规则和配置规则")])]),s._v(" "),a("p",[s._v("在微服务项目中或者 Spring Boot 的多模块项目中，往往需要将公共的部分抽离到单独的模块中，供其他模块引用，例如 common 模块，此时，common 模块下 resource 目录下的配置文件的读取规则遵循以下逻辑：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("配置文件优先级")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("file:./config/  \t- 优先级最高（项目根路径下的config）\nfile:./  \t\t\t- 优先级第二  -（项目根路径下）\nclasspath:/config/  - 优先级第三（项目resources/config下）\nclasspath:/  \t\t- 优先级第四（项目resources根目录)\n\nproject-sample\n\t├── config   \n\t\t├── application.yml \t（1）\n\t├── application.yml \t\t（2）\n\t└── src/main/resources\n\t\t└── config\n\t\t|\t├── application.yml （3）\n\t\t├── application.yml \t（4）  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("以上位置的 application.yml 和 application.properties 遵循以下规则")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("properties")]),s._v(" 优先级高于 "),a("code",[s._v("yml")])])]),s._v(" "),a("li",[a("p",[s._v("高优先级配置会覆盖低优先级配置")])]),s._v(" "),a("li",[a("p",[s._v("多个配置文件互补")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("比如，两个同名文件中有相同的配置，相同的配置会被高优先级的配置覆盖，其余配置互补\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("当模块 A 依赖 common 模块时，模块 A 中会**==忽略==** common **==同位置且同名==**的配置文件，例如：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("模块A resource 下有 application.yml 文件\ncommon resource 下有 application.yml 文件\n\n此时 common 模块下的配置文件不会被加载，会被完全丢弃\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("配置文件忽略规则")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("规则1: common 模块下的 application.yml 会被丢弃\n\t模块A resource 下有 application.yml 文件\n\tcommon resource 下有 application.yml 文件\n\n规则2: common 模块下的 application.yml 会被正常加载\n\t模块A resource 下有 application.properties 文件\n\tcommon resource 下有 application.yml 文件\n\t\n规则3：common 模块下的 application.yml 会被正常加载\n\t模块A resource/config 下有 application.yml 文件\n\tcommon resource 下有 application.yml 文件\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[s._v("多模块时，被依赖模块中同位置且同名的配置文件会被忽略，未忽略的配置文件遵循配置文件优先级规则")])])])}),[],!1,null,null,null);n.default=e.exports}}]);